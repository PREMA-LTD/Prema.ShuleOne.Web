<!-- student-registration.component.html -->
<div class="min-h-screen bg-gray-50 p-8">
    <!-- Loading Indicator -->
<div *ngIf="isLoading" class="spinner-overlay">
    <mat-progress-spinner
      mode="indeterminate"
      color="primary"
      [diameter]="50">
    </mat-progress-spinner>
  </div>
  
    <mat-card class="max-w-2xl mx-auto">
        <mat-card-header>
            <mat-card-title class="w-full text-center text-2xl font-bold text-gray-800 mb-8">
                Assign Payment
            </mat-card-title>
        </mat-card-header>

        <mat-card-content>
            <div class="p-4">
                <form [formGroup]="assignFeePaymentForm" class="flex flex-col gap-4">

                    <mat-form-field appearance="outline" class="w-full">
                        <mat-label>Grade</mat-label>
                        <mat-select formControlName="grade" required (selectionChange)="onGradeChange($event.value)">
                            <mat-option [value]="grade.value" *ngFor="let grade of grades">
                                {{grade.name}}
                              </mat-option>
                        </mat-select>
                        <mat-error *ngIf="assignFeePaymentForm.get('grade')?.invalid">
                          Grade is required
                        </mat-error>
                      </mat-form-field>

                      <mat-form-field appearance="outline" class="w-full">
                        <mat-label>Student</mat-label>
                        <mat-select formControlName="student" required >
                          <mat-option *ngFor="let student of students" [value]="student.id">
                            {{student.id}} - {{student.other_names}} {{student.surname}}
                          </mat-option>
                        </mat-select>
                        <mat-error *ngIf="assignFeePaymentForm.get('student')?.invalid">
                          Student is required
                        </mat-error>
                      </mat-form-field>

                    <!-- Navigation Buttons -->
                    <div class="flex justify-end mt-4">
                        <button mat-raised-button color="primary" (click)="assignPayment()">
                            Save Payment
                        </button>
                    </div>
                </form>
            </div>
        </mat-card-content>
    </mat-card>
</div>
